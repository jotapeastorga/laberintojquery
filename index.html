<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Juegazo</title>
  <link rel="stylesheet" href="css/miestilo.css">
  <script src="js/jquery.js"></script>
  <script src="js/Cronometro.js"></script>
  <script>
    var x = 40;
    var y = 47;
    var bandera = true;

    function ganaste(lugar, minu, segu, mise) {
      let lx = lugar.left;
      let ty = lugar.top;
      //console.log(lx + ' y ' + ty);
      if (ty === 359 && (lx === 640 || lx === 632)) {
        ganasteLimpiar();
        alert('Ganaste!! en ' + minu + ':' + segu + ':' + mise);
        x = 40;
        y = 47;

        $("#capa").css("left", 40 + "px");
        $("#capa").css("top", 47 + "px");
      }
    }


    function validar(lx, ty) {
      console.log(' lx' + lx + ' validador ' + 'ty ' + ty);
      if (lx == 32 && ty == 47) {
        return false;
        //atras
      };
      if ((lx >= 40 || lx <= 100) && (ty === 39)) {
        return false;
        //arriba
      };
      if (lx < 95 && ty === 55) {
        return false;
        //abajo
      };
      if (lx === 112 && ty >= 47) {
        if (ty < 399) {
          //derecha
          return false;
        };
      };

      if (lx === 88 && ty >= 63) {
        if (ty < 423) {
          //derecha
          return false;
        };
      };

      if (lx >= 90 && ty === 423) {
        if (lx <= 264) {
          return false;
        };
      };

      if (lx >= 112 && ty === 399) {
        if (lx <= 248) {
          return false;
        };
      };

      if (lx === 272 && ty > 47) {
        if (ty <= 415) {
          return false;
        };
      };

      if (lx === 248 && ty >= 47) {
        if (ty <= 399) {
          return false;
        };
      };

      if (lx >= 280 && ty === 55) {
        if (lx < 360) {
          return false;
        };
      };

      if (lx === 352 && ty >= 63) {
        if (ty <= 335) {
          return false;
        };
      };

      if (lx >= 360 && ty === 343) {
        if (lx <= 496) {
          return false;
        };
      };

      if (lx === 504 && ty >= 55) {
        if (ty <= 335) {
          return false;
        };
      };

      if (lx >= 512 && ty === 55) {
        if (lx <= 624) {
          return false;
        };
      };

      if (lx === 624 && ty >= 63) {
        if (ty <= 351) {
          return false;
        };
      };

      if (lx === 376 && ty >= 47) {
        if (ty <= 311) {
          return false;
        };
      };

      if (lx === 488 && ty >= 39) {
        if (ty <= 303) {
          return false;
        };
      };

      if (lx === 648 && ty >= 47) {
        if (ty <= 327) {
          return false;
        };
      };

      if (lx >= 384 && ty === 311) {
        if (lx <= 488) {
          return false;
        };
      };



      return true;
    };

    $(document).ready(function () {

      $("body").keydown(function (xxx) {


        if (xxx.which == 37) {
          if (validar((x - 8), y)) {
            x = x - 8;
            $("#capa").css("left", x + "px");
            ganaste($("#capa").position(), $("#minuto").text(), $("#segundo").text(), $("#centesima").text());
          } else {
            if (!bandera) {
              reiniciar();
              bandera = true;
              x = 40;
              y = 47;
            }
          }
        }

        if (xxx.which == 39) {
          if (validar((x + 8), y)) {
            if (bandera) {
              console.log('comenzo');
              comenzar();
              bandera = false;
            }
            x = x + 8;
            $("#capa").css("left", x + "px");
            ganaste($("#capa").position(), $("#minuto").text(), $("#segundo").text(), $("#centesima").text());
          } else {
            if (!bandera) {
              reiniciar();
              bandera = true;
              x = 40;
              y = 47;
            }
          }
        }

        if (xxx.which == 38) {
          if (validar(x, (y - 8))) {
            y = y - 8;
            $("#capa").css("top", y + "px");
            ganaste($("#capa").position(), $("#minuto").text(), $("#segundo").text(), $("#centesima").text());
          } else {
            if (!bandera) {
              reiniciar();
              bandera = true;
              x = 40;
              y = 47;
            }
          }
        }

        if (xxx.which == 40) {
          if (validar(x, (y + 8))) {
            y = y + 8;
            $("#capa").css("top", y + "px");
            ganaste($("#capa").position(), $("#minuto").text(), $("#segundo").text(), $("#centesima").text());
          } else {
            if (!bandera) {
              reiniciar();
              bandera = true;
              x = 40;
              y = 47;
            }
          }
        }

      });

    });
  </script>
</head>

<body>
  <div id="contenedor">
    <div id="laberinto">
      <div id="capa"></div>

    </div>

    <div id="cronometro">
      <div id="minuto">00</div>
      <div class="divisor">:</div>
      <div id="segundo">00</div>
      <div class="divisor">:</div>
      <div id="centesima">00</div>
    </div>

  </div>
</body>

</html>